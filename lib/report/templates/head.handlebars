<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for {{entity}}</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      {{{prettify.css}}}
      {{{base.css}}}
      .enable-incremental .disabled {
        opacity: 0.2;
      }
      .enable-incremental .summary-line.origin{
        display: none;
      }
      .enable-origin .summary-line.incremental{
        display: none;
      }
    </style>
    <script>
    !function(t,e,a,r,c){t.TracertCmdCache=t.TracertCmdCache||[],t[c]=window[c]||
      {_isInit:!0,call:function(){t.TracertCmdCache.push(arguments)},
      start:function(t){this.call('start',t)}},t[c].l=new Date;
      var n=e.createElement(a),s=e.getElementsByTagName(a)[0];
      n.async=!0,n.src=r,s.parentNode.insertBefore(n,s)}
    (window,document,'script','https://tracert.alipay.com/tracert.js','Tracert');
      Tracert.start({ plugins: [ 'BucName' ], spmAPos: 'a254', spmBPos: 'b19448' });
    </script>
</head>
<body class="enable-origin">
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      {{{pathHtml}}}
    </h1>
    <div>
      <input id="incremental-btn" type="checkbox" />
      <label for="incremental-btn">show incremental</label>
    </div>
    <div class='clearfix origin'>
      {{#with metrics.lines}}
      <div class='fl pad1y space-right2'>
        <span class="strong">{{pct}}% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>{{covered}}/{{total}}</span>
      </div>
      {{/with}}
      {{#with metrics.functions}}
      <div class='fl pad1y space-right2'>
        <span class="strong">{{pct}}% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>{{covered}}/{{total}}</span>
      </div>
      {{/with}}
      {{#with metrics.statements}}
      <div class='fl pad1y space-right2'>
        <span class="strong">{{pct}}% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>{{covered}}/{{total}}</span>
      </div>
      {{/with}}
      {{#with metrics.branches}}
      <div class='fl pad1y space-right2'>
        <span class="strong">{{pct}}% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>{{covered}}/{{total}}</span>
      </div>
      {{/with}}
      {{#if_has_ignores metrics}}
      <div class='fl pad1y'>
        <span class="strong">{{#show_ignores metrics}}{{/show_ignores}}</span>
        <span class="quiet">Ignored</span>  &nbsp;&nbsp;&nbsp;&nbsp;
      </div>
      {{/if_has_ignores}}
    </div>
    <div class='clearfix incremental' style="display: none;">
      {{#with incrementMetrics.lines}}
      <div class='fl pad1y space-right2'>
        <span class="strong">{{pct}}% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>{{covered}}/{{total}}</span>
      </div>
      {{/with}}
      {{#with incrementMetrics.functions}}
      <div class='fl pad1y space-right2'>
        <span class="strong">{{pct}}% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>{{covered}}/{{total}}</span>
      </div>
      {{/with}}
      {{#with incrementMetrics.statements}}
      <div class='fl pad1y space-right2'>
        <span class="strong">{{pct}}% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>{{covered}}/{{total}}</span>
      </div>
      {{/with}}
      {{#with incrementMetrics.branches}}
      <div class='fl pad1y space-right2'>
        <span class="strong">{{pct}}% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>{{covered}}/{{total}}</span>
      </div>
      {{/with}}
      {{#if_has_ignores incrementMetrics}}
      <div class='fl pad1y'>
        <span class="strong">{{#show_ignores incrementMetrics}}{{/show_ignores}}</span>
        <span class="quiet">Ignored</span>  &nbsp;&nbsp;&nbsp;&nbsp;
      </div>
      {{/if_has_ignores}}
    </div>
  </div>
  <div class='status-line {{reportClass}}'></div>
  <script>
    function showIncremental() {
      document.querySelector('.incremental').style.display = 'block';
      document.querySelector('.origin').style.display = 'none';
      document.body.className = 'enable-incremental';
    }

    function showOrigin() {
      document.querySelector('.incremental').style.display = 'none';
      document.querySelector('.origin').style.display = 'block';
      document.body.className = 'enable-origin';
    }

    document.querySelector('#incremental-btn').addEventListener('click', e => {
      if (e.target.checked) {
        showIncremental();
        localStorage && localStorage.setItem('enable-incremental', true);
      } else {
        showOrigin();
        localStorage && localStorage.setItem('enable-incremental', '')
      }
    }, false);

    if(localStorage && localStorage.getItem('enable-incremental')){
      showIncremental();
      document.querySelector('#incremental-btn').setAttribute('checked', 'checked');
    };
  </script>
